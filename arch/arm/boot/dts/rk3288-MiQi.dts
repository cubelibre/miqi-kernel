/dts-v1/;

#include "rk3288.dtsi"
#include "lcd-box.dtsi"
#include <dt-bindings/input/input.h>

/ {
  fiq-debugger {
    status = "disabled";
  };

  hsic-usb-hub{
    compatible = "hub_reset";
    reset,pin =<&gpio7 GPIO_A6 GPIO_ACTIVE_HIGH>;	// hub reset pin
    status = "disabled";
  };

  wireless-wlan {
    compatible = "wlan-platdata";

    /* wifi_chip_type - wifi chip define
     * bcmwifi ==> like ap6xxx, rk90x;
     * rtkwifi ==> like rtl8188xx, rtl8723xx,rtl8812auv;
     * esp8089 ==> esp8089;
     * other   ==> for other wifi;
     */
    wifi_chip_type = "rtkwifi";
    keep_wifi_power_on;
    status = "disabled";
  };

  wireless-bluetooth {
    status = "disabled";
  };

 codec_hdmi_i2s: codec-hdmi-i2s {
    compatible = "hdmi-i2s";
  };

 codec_hdmi_spdif: codec-hdmi-spdif {
    compatible = "hdmi-spdif";
  };

  rockchip-hdmi-i2s {
    status = "disabled";
    compatible = "rockchip-hdmi-i2s";
    dais {
      dai0 {
	audio-codec = <&codec_hdmi_i2s>;
	audio-controller = <&i2s>;
	format = "i2s";
	//continuous-clock;
	//bitclock-inversion;
	//frame-inversion;
	//bitclock-master;
	//frame-master;
      };
    };
  };

  usb_control {
    compatible = "rockchip,rk3288-usb-control";
    host_drv_gpio = <&gpio0 GPIO_B6 GPIO_ACTIVE_LOW>;
    rockchip,remote_wakeup;
    rockchip,usb_irq_wakeup;
  };
 };

&gmac {
  reset-gpio = <&gpio4 GPIO_B0 GPIO_ACTIVE_LOW>;
  phy-mode = "rgmii";
  clock_in_out = "input";
  tx_delay = <0x30>;
  rx_delay = <0x10>;
};

&pinctrl {
  //used for init some gpio

  init-gpios = <&gpio8 GPIO_A1 GPIO_ACTIVE_HIGH
    &gpio7 GPIO_B1 GPIO_ACTIVE_HIGH
    &gpio4 GPIO_B0 GPIO_ACTIVE_HIGH>;

  gpio0_gpio {
  gpio0_c2: gpio0-c2 {
      rockchip,pins = <GPIO0_C2>;
      rockchip,pull = <VALUE_PULL_DOWN>;
    };

  };

  gpio7_gpio {
  gpio7_b7: gpio7-b7 {
      rockchip,pins = <GPIO7_B7>;
      rockchip,pull = <VALUE_PULL_UP>;
    };

    //to add
  };
  //could add other pinctrl definition such as gpio

  // gmac drive strength
  gpio4_gmac {
  mac_clk: mac-clk {
      rockchip,drive = <VALUE_DRV_12MA>;
    };

  mac_txpins: mac-txpins {
      rockchip,drive = <VALUE_DRV_12MA>;
    };

  mac_rxpins: mac-rxpins {
      rockchip,drive = <VALUE_DRV_12MA>;
    };

  mac_crs: mac-crs {
      rockchip,drive = <VALUE_DRV_12MA>;
    };

  mac_mdpins: mac-mdpins {
      rockchip,drive = <VALUE_DRV_12MA>;
    };
  };
};

&emmc {
  clock-frequency = <750000000>;
  clock-freq-min-max = <400000 75000000>;

  supports-highspeed;
  supports-emmc;
  bootpart-no-access;
  supports-tSD;//only tsd-sdcard mode
  supports-DDR_MODE;
  caps2-mmc-hs200;

  ignore-pm-notify;
  keep-power-in-suspend;
  //poll-hw-reset
  status = "okay";
};

&sdmmc {
  clock-frequency = <50000000>;
  lock-freq-min-max = <400000 50000000>;
  supports-highspeed;
  supports-sd;
  broken-cd;
  card-detect-delay = <200>;

  ignore-pm-notify;
  keep-power-in-suspend;

  vmmc-supply = <&ldo1_reg>;
  status = "okay";
};

&sdio {
  clock-frequency = <50000000>;
  clock-freq-min-max = <200000 50000000>;
  supports-highspeed;
  supports-sdio;
  ignore-pm-notify;
  keep-power-in-suspend;
  //cap-sdio-irq;
  status = "okay";
};

&i2c0 {
  status = "okay";
 syr827: syr827@40 {
    compatible = "silergy,syr82x";
    reg = <0x40>;
    status = "okay";
    regulators {
#address-cells = <1>;
#size-cells = <0>;
    syr827_dc1: regulator@0 {
	reg = <0>;
	regulator-compatible = "syr82x_dcdc1";
	regulator-name = "vdd_arm";
	regulator-min-microvolt = <712500>;
	regulator-max-microvolt = <1500000>;
	regulator-always-on;
	regulator-boot-on;
	regulator-initial-mode = <0x2>;
	regulator-initial-state = <3>;
	regulator-state-mem {
	  regulator-state-mode = <0x2>;
	  regulator-state-enabled;
	  regulator-state-uv = <900000>;
	};
      };
    };
  };

 syr828: syr828@41 {
    compatible = "silergy,syr82x";
    reg = <0x41>;
    status = "okay";
    regulators {
#address-cells = <1>;
#size-cells = <0>;
    syr828_dc1: regulator@0 {
	reg = <0>;
	regulator-compatible = "syr82x_dcdc1";
	regulator-name = "vdd_gpu";
	regulator-min-microvolt = <712500>;
	regulator-max-microvolt = <1500000>;
	regulator-always-on;
	regulator-boot-on;
	regulator-initial-mode = <0x2>;
	regulator-initial-state = <3>;
	regulator-state-mem {
	  regulator-state-mode = <0x2>;
	  regulator-state-disabled;
	  regulator-state-uv = <900000>;
	};
      };
    };
  };
 act8846: act8846@5a {
    reg = <0x5a>;
    status = "okay";
  };

  rtc@51 {
    compatible = "rtc,hym8563";
    reg = <0x51>;
    irq_gpio = <&gpio0 GPIO_A4 IRQ_TYPE_EDGE_FALLING>;
  };
};

&i2c1 {
  status = "okay";
  rtc@51 {
    compatible = "nxp,pcf8563";
    reg = <0x51>;
  };
};

&i2c2 {
  status = "okay";
};

&i2c3 {
  status = "okay";
};

&i2c4 {
  status = "okay";
};

&i2c5 {
  status = "disabled";
};

&fb {
  rockchip,disp-mode = <DUAL>;
  rockchip,uboot-logo-on = <1>;
  rockchip,disp-policy = <DISPLAY_POLICY_BOX_TEMP>;
};

&disp_timings {
  native-mode = <&timing1>;
};

&rk_screen {
  display-timings = <&disp_timings>;
};

/*lcdc0 as PRMRY(HDMI)*/
&lcdc0 {
  status = "okay";
  rockchip,iommu-enabled = <1>;
  rockchip,prop = <PRMRY>;
};

&lcdc1 {
  status = "disabled";
  rockchip,iommu-enabled = <1>;
  rockchip,prop = <EXTEND>;
};

&hdmi {
  status = "okay";
  rockchip,cec_enable = <0>;
  rockchip,hdcp_enable = <0>;
};

&ion_cma {
  reg = <0x00000000 0x1000000>; /* 16MB */
};

&vpu {
  iommu_enabled = <1>;
};

&hevc {
  iommu_enabled = <1>;
};

&iep {
  iommu_enabled = <1>;
};

&clk_core_dvfs_table {
  support-pvtm = <1>;
  pvtm-operating-points = <
    /* KHz    uV	pvtm margin*/
    //		126000   900000	25000
    //		216000   900000	25000
    //		312000   900000	25000
    408000   900000	25000
    600000   950000	50000
    696000   950000	50000
    816000  1000000	50000
    1008000 1050000	75000
    1200000 1100000	75000
    1416000 1200000	75000
    1512000 1300000	75000
    1608000 1350000	75000
    //		1704000 1350000	75000
    //		1800000 1350000	75000
    >;
  status="okay";
};

&clk_gpu_dvfs_table {
  operating-points = <
    /* KHz    uV */
    //		100000 900000
    200000 900000
    300000 950000
    420000 1100000
    500000 1150000
    //		600000 1250000
    >;
  status="okay";
};

&clk_ddr_dvfs_table {
  operating-points = <
    /* KHz    uV */
    200000 1075000
    300000 1075000
    456000 1125000
    533000 1150000
    >;

  freq-table = <
    /*status		freq(KHz)*/
    SYS_STATUS_NORMAL	456000
    SYS_STATUS_SUSPEND	200000
    //SYS_STATUS_VIDEO_1080P  240000
    SYS_STATUS_VIDEO_4K     533000
    SYS_STATUS_PERFORMANCE  533000
    //SYS_STATUS_BOOST	324000
    //SYS_STATUS_ISP	400000
    >;
  auto-freq-table = <
    240000
    324000
    456000
    528000
    >;
  auto-freq=<0>;
  status="okay";
};
/include/ "act8846.dtsi"
&act8846 {
  gpios =<&gpio7 GPIO_A1 GPIO_ACTIVE_LOW>,<&gpio0 GPIO_B2 GPIO_ACTIVE_HIGH>;
  act8846,system-power-controller;

  regulators {

  dcdc1_reg: regulator@0{
      regulator-name= "act_dcdc1";
      regulator-min-microvolt = <1200000>;
      regulator-max-microvolt = <1200000>;
      regulator-always-on;
      regulator-boot-on;
    };

  dcdc2_reg: regulator@1 {
      regulator-name= "vccio";
      regulator-min-microvolt = <3300000>;
      regulator-max-microvolt = <3300000>;
      regulator-initial-state = <3>;
      regulator-state-mem {
	regulator-state-enabled;
	regulator-state-uv = <3300000>;
      };
    };

  dcdc3_reg: regulator@2 {
      regulator-name= "vdd_logic";
      regulator-min-microvolt = <700000>;
      regulator-max-microvolt = <1500000>;
      regulator-initial-state = <3>;
      regulator-state-mem {
	regulator-state-enabled;
	regulator-state-uv = <1200000>;
      };

    };

  dcdc4_reg: regulator@3 {
      regulator-name= "act_dcdc4";
      regulator-min-microvolt = <2000000>;
      regulator-max-microvolt = <2000000>;
      regulator-initial-state = <3>;
      regulator-state-mem {
	regulator-state-enabled;
	regulator-state-uv = <2000000>;
      };
    };

  ldo1_reg: regulator@4 {
      regulator-name= "vccio_sd";
      regulator-min-microvolt = <1800000>;
      regulator-max-microvolt = <3300000>;

    };

  ldo2_reg: regulator@5 {
      regulator-name= "act_ldo2";
      regulator-min-microvolt = <1050000>;
      regulator-max-microvolt = <1050000>;

    };

  ldo3_reg: regulator@6 {
      regulator-name= "act_ldo3";
      regulator-min-microvolt = <1800000>;
      regulator-max-microvolt = <1800000>;

    };

  ldo4_reg:regulator@7 {
      regulator-name= "act_ldo4";
      regulator-min-microvolt = <3300000>;
      regulator-max-microvolt = <3300000>;

    };

  ldo5_reg: regulator@8 {
      regulator-name= "act_ldo5";
      regulator-min-microvolt = <3300000>;
      regulator-max-microvolt = <3300000>;

    };

  ldo6_reg: regulator@9 {
      regulator-name= "act_ldo6";
      regulator-min-microvolt = <1100000>;
      regulator-max-microvolt = <1100000>;
      regulator-initial-state = <3>;
      regulator-state-mem {
	regulator-state-enabled;
      };

    };

  ldo7_reg: regulator@10 {
      regulator-name= "vcc_18";
      regulator-min-microvolt = <1800000>;
      regulator-max-microvolt = <1800000>;
      regulator-initial-state = <3>;
      regulator-state-mem {
	regulator-state-enabled;
      };

    };

  ldo8_reg: regulator@11 {
      regulator-name= "act_ldo8";
      regulator-min-microvolt = <1850000>;
      regulator-max-microvolt = <1850000>;

    };
  };
 };

&lcdc_vdd_domain {
  regulator-name = "vcc30_lcd";
};
&dpio_vdd_domain{
  regulator-name = "vcc18_cif";
};
&flash0_vdd_domain{
  regulator-name = "vcc_flash";
};
&flash1_vdd_domain{
  regulator-name = "vcc_flash";
};
&apio3_vdd_domain{
  regulator-name = "vccio_wl";
};
&apio5_vdd_domain{
  regulator-name = "vccio";
};
&apio4_vdd_domain{
  regulator-name = "vccio";
};
&apio1_vdd_domain{
  regulator-name = "vccio";
};
&apio2_vdd_domain{
  regulator-name = "vccio";
};
&sdmmc0_vdd_domain{
  regulator-name = "vcc_sd";
};

/*
 * Due to not have the software of PWM for remotectrl.
 * We can _*HACK*_ do that as the following.
 */
&pwm0 {
  compatible = "rockchip,remotectl-pwm";
  remote_pwm_id = <0>;
  handle_cpu_id = <1>;
  status = "okay";

  ir_key1{
    rockchip,usercode = <0x4040>;
    rockchip,key_table =
      <0xf2	KEY_REPLY>,
      <0xba	KEY_BACK>,
      <0xf4	KEY_UP>,
      <0xf1	KEY_DOWN>,
      <0xef	KEY_LEFT>,
      <0xee	KEY_RIGHT>,
      <0xbd	KEY_HOME>,
      <0xea	KEY_VOLUMEUP>,
      <0xe3	KEY_VOLUMEDOWN>,
      <0xe2	KEY_SEARCH>,
      <0xb2	KEY_POWER>,
      <0xbc	KEY_MUTE>,
      <0xec	KEY_MENU>,
      <0xbf	0x190>,
      <0xe0	0x191>,
      <0xe1	0x192>,
      <0xe9	183>,
      <0xe6	248>,
      <0xe8	185>,
      <0xe7	186>,
      <0xf0	388>,
      <0xbe	0x175>;
  };
  ir_key2{
    rockchip,usercode = <0xff00>;
    rockchip,key_table =
      <0xf9	KEY_HOME>,
      <0xbf	KEY_BACK>,
      <0xfb	KEY_MENU>,
      <0xaa	KEY_REPLY>,
      <0xb9	KEY_UP>,
      <0xe9	KEY_DOWN>,
      <0xb8	KEY_LEFT>,
      <0xea	KEY_RIGHT>,
      <0xeb	KEY_VOLUMEDOWN>,
      <0xef	KEY_VOLUMEUP>,
      <0xf7	KEY_MUTE>,
      <0xe7	KEY_POWER>,
      <0xfc	KEY_POWER>,
      <0xa9	KEY_VOLUMEDOWN>,
      <0xa8	KEY_VOLUMEDOWN>,
      <0xe0	KEY_VOLUMEDOWN>,
      <0xa5	KEY_VOLUMEDOWN>,
      <0xab	183>,
      <0xb7	388>,
      <0xf8	184>,
      <0xaf	185>,
      <0xed	KEY_VOLUMEDOWN>,
      <0xee	186>,
      <0xb3	KEY_VOLUMEDOWN>,
      <0xf1	KEY_VOLUMEDOWN>,
      <0xf2	KEY_VOLUMEDOWN>,
      <0xf3	KEY_SEARCH>,
      <0xb4	KEY_VOLUMEDOWN>,
      <0xbe	KEY_SEARCH>;
  };
  ir_key3{
    rockchip,usercode = <0x1dcc>;
    rockchip,key_table =
      <0xee	KEY_REPLY>,
      <0xf0	KEY_BACK>,
      <0xf8	KEY_UP>,
      <0xbb	KEY_DOWN>,
      <0xef	KEY_LEFT>,
      <0xed	KEY_RIGHT>,
      <0xfc	KEY_HOME>,
      <0xf1	KEY_VOLUMEUP>,
      <0xfd	KEY_VOLUMEDOWN>,
      <0xb7	KEY_SEARCH>,
      <0xff	KEY_POWER>,
      <0xf3	KEY_MUTE>,
      <0xbf	KEY_MENU>,
      <0xf9	0x191>,
      <0xf5	0x192>,
      <0xb3	388>,
      <0xbe	KEY_1>,
      <0xba	KEY_2>,
      <0xb2	KEY_3>,
      <0xbd	KEY_4>,
      <0xf9	KEY_5>,
      <0xb1	KEY_6>,
      <0xfc	KEY_7>,
      <0xf8	KEY_8>,
      <0xb0	KEY_9>,
      <0xb6	KEY_0>,
      <0xb5	KEY_BACKSPACE>;
  };
};

&uart_dbg {
  status = "okay";
};

